<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Squid Game Survival Slot - Upgraded Mobile Version</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
:root {
  --primary: #101024;
  --secondary: #2a004f;
  --accent: #ff006f;
  --accent2: #01e6c2;
  --win: #ffe156;
  --panel: #161632;
  --jackpot: #ffb800;
  --major: #42f4f4;
  --mini: #5bff7e;
  --mega: #fe6cff;
}

html, body {
  margin: 0;
  padding: 0;
  background: radial-gradient(circle at 50% 30%, #2a004f 0%, #0a0a18 100%);
  color: #fff;
  font-family: 'Montserrat', 'Orbitron', Arial, sans-serif;
  min-height: 100vh;
}

.game-container {
  width: 100vw;
  min-height: 100vh;
  max-width: 100vw;
  margin: 0 auto;
  background: var(--primary);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-bottom: 0;
}

header {
  width: 100vw;
  padding: 8vw 0 2vw 0;
  background: linear-gradient(180deg, #2a004f 40%, #101024 100%);
}

.jackpot-bar {
  display: flex;
  justify-content: space-around;
  align-items: center;
  margin-bottom: 4vw;
  width: 100vw;
  font-size: 3.7vw;
}

.jackpot {
  padding: 1.5vw 2vw;
  border-radius: 2vw;
  text-align: center;
  font-weight: bold;
  box-shadow: 0 0 10px 2px #0005;
}
.jackpot span { display: block; font-size: 4vw; margin-top: 0.7vw; }
.jackpot.max { background: var(--jackpot); color: #222;}
.jackpot.major { background: var(--major); color: #111;}
.jackpot.mini { background: var(--mini); color: #162;}
.jackpot.mega { background: var(--mega); color: #312; }

.game-title {
  text-align: center;
  font-size: 7vw;
  font-weight: bold;
  color: var(--accent2);
  letter-spacing: 0.55vw;
  text-shadow: 0 0 30px var(--accent), 0 2px 0 #000;
}

.slot-board {
  width: 94vw;
  max-width: 94vw;
  height: 68vw;
  max-height: 68vw;
  background: var(--panel);
  border-radius: 4vw;
  box-shadow: 0 2vw 7vw #ff00b822;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  grid-template-rows: repeat(4, 1fr);
  gap: 1.5vw;
  margin: 4vw 0 2vw 0;
  border: 0.7vw solid var(--accent2);
  position: relative;
  overflow: hidden;
}

.symbol-cell {
  background: #181a2f;
  border-radius: 2vw;
  box-shadow: 0 0 1vw #00fff966;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  position: relative;
  transition: box-shadow 0.15s;
}

.symbol-cell img {
  display: block;
  max-width: 13vw;
  max-height: 13vw;
  margin: 0 auto;
  filter: drop-shadow(0 0 2vw var(--accent2));
  user-select: none;
  pointer-events: none;
}

.symbol-cell.win {
  box-shadow: 0 0 3vw 1vw var(--win), 0 0 2vw #fff;
  animation: winflash 0.7s alternate 2;
}
@keyframes winflash {
  0% { box-shadow: 0 0 3vw 1vw var(--win), 0 0 2vw #fff; }
  100% { box-shadow: 0 0 7vw 2vw #fffbe6, 0 0 3vw #fff; }
}

.info-panel {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 1vw;
  width: 100vw;
  gap: 1vw;
}

.balance {
  font-size: 4.7vw;
  font-weight: bold;
  color: #fff;
  margin-bottom: 0.2vw;
}

.bet-control {
  display: flex;
  align-items: center;
  gap: 2vw;
  font-size: 4vw;
}
#bet-amount {
  font-size: 5vw;
  font-weight: bold;
  color: var(--accent2);
}
#bet-minus, #bet-plus {
  width: 8vw; height: 8vw;
  background: #181a2c;
  color: var(--accent2);
  border: 0.5vw solid var(--accent2);
  font-size: 6vw;
  border-radius: 50%;
  cursor: pointer;
  transition: background 0.13s;
}
#bet-minus:active, #bet-plus:active {
  background: var(--accent2);
  color: #fff;
}

#result-message {
  min-height: 7vw;
  font-size: 4vw;
  text-align: center;
  color: var(--win);
  text-shadow: 0 0 1.5vw #ffe156;
}

.free-spin-banner {
  color: var(--accent2);
  font-weight: bold;
  background: #222;
  border: 0.5vw solid var(--accent2);
  padding: 1vw 6vw;
  border-radius: 3vw;
  font-size: 4.5vw;
  margin: 1vw 0;
  letter-spacing: 1vw;
  box-shadow: 0 0 2vw #01e6c288;
  animation: fsbanner 1.5s infinite alternate;
}
@keyframes fsbanner {
  to { box-shadow: 0 0 6vw #22ffe7, 0 0 7vw #fff; }
}

.actions {
  display: flex;
  justify-content: center;
  width: 100vw;
  margin: 3vw 0 0 0;
}
.spin-btn {
  width: 14vw;
  height: 14vw;
  border-radius: 50%;
  background: var(--accent2);
  border: 1vw solid #fff;
  box-shadow: 0 0 5vw var(--accent2);
  font-size: 8vw;
  color: #fff;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  transition: background 0.13s, box-shadow 0.13s;
}
.spin-btn:after {
  content: "‚ü≥";
  font-size: 7vw;
  font-weight: bold;
  color: #fff;
}
.spin-btn:active { background: var(--accent); }

footer {
  margin: 4vw 0 0 0;
  text-align: center;
  font-size: 3vw;
  color: #aaa;
  letter-spacing: 0.6vw;
  }
    
  </style>
</head>
<body>
  <div class="game-container">
    <header>
      <div class="jackpot-bar">
        <div class="jackpot mini">Mini<br><span>$40</span></div>
        <div class="jackpot major">Major<br><span>$400</span></div>
        <div class="jackpot mega">Mega<br><span>$2,000</span></div>
        <div class="jackpot max">MAX WIN<br><span>$10,000</span></div>
      </div>
      <div class="game-title">SQUID GAME SLOT</div>
    </header>
    <main>
      <div class="slot-board" id="slot-board"></div>
      <div class="info-panel">
        <div class="balance">Balance: $<span id="balance">100.00</span></div>
        <div class="bet-control">
          <button id="bet-minus">-</button>
          <span>Bet</span>
          <span id="bet-amount">0.20</span>
          <button id="bet-plus">+</button>
        </div>
        <div class="free-spin-banner" id="free-spin-banner" style="display:none;">
          <span id="free-spin-count">0</span> FREE SPINS!
        </div>
        <div id="result-message"></div>
      </div>
      <div class="actions">
        <button id="spin-btn" class="spin-btn"></button>
      </div>
    </main>
    <footer>
      <div class="copyright">Fan-made Squid Game Slot. Demo only.</div>
    </footer>
  </div>
  <audio id="win-sound" src="assets/win.mp3" preload="auto"></audio>
  <audio id="spin-sound" src="assets/spin.mp3" preload="auto"></audio>
  <audio id="bonus-sound" src="assets/bonus.mp3" preload="auto"></audio>
  <script>
    // Squid Game Slot - Mobile Upgraded Version

const SYMBOLS = [
  { name: "circle", img: "assets/circle.png" },
  { name: "triangle", img: "assets/triangle.png" },
  { name: "square", img: "assets/square.png" },
  { name: "umbrella", img: "assets/umbrella.png" },
  { name: "doll", img: "assets/doll.png" }, // Free spin symbol
  { name: "guard", img: "assets/guard.png" },
  { name: "money", img: "assets/money.png" },
  { name: "player", img: "assets/player.png" },
  { name: "coin", img: "assets/coin.png" },
];

const ROWS = 4, REELS = 5;
const INITIAL_BALANCE = 100.00;
const BETS = [0.20, 0.40, 1.00, 2.00, 5.00, 10.00];
const FREE_SPIN_TRIGGER = 4;
const FREE_SPIN_AWARD = 8;

let state = {
  board: [],
  balance: INITIAL_BALANCE,
  betIdx: 0,
  spinning: false,
  freeGames: 0,
  fsLeft: 0,
  chasingFS: false,
  chasingFSCount: 0,
  guaranteedFS: false,
};

const $ = id => document.getElementById(id);
const slotBoard = $("slot-board");
const betMinus = $("bet-minus"), betPlus = $("bet-plus");
const betAmount = $("bet-amount"), balanceEl = $("balance");
const spinBtn = $("spin-btn"), resultMsg = $("result-message");
const fsBanner = $("free-spin-banner"), fsCount = $("free-spin-count");
const winSound = $("win-sound"), spinSound = $("spin-sound"), bonusSound = $("bonus-sound");

function preloadImages() {
  SYMBOLS.forEach(s => { let img = new Image(); img.src = s.img; });
}
function drawBoard(board, winCells=[]) {
  slotBoard.innerHTML = "";
  for(let r=0;r<ROWS;r++) {
    for(let c=0;c<REELS;c++) {
      let idx = r*REELS+c;
      let sIdx = board[r][c];
      let cell = document.createElement("div");
      cell.className = "symbol-cell" + (winCells.some(([rr,cc])=>rr===r&&cc===c)?" win":"");
      let img = document.createElement("img");
      img.src = SYMBOLS[sIdx].img;
      img.alt = SYMBOLS[sIdx].name;
      cell.appendChild(img);
      slotBoard.appendChild(cell);
    }
  }
}
function updateUI() {
  betAmount.textContent = BETS[state.betIdx].toFixed(2);
  balanceEl.textContent = state.balance.toFixed(2);
  if(state.freeGames>0) {
    fsBanner.style.display="inline-block";
    fsCount.textContent=state.fsLeft;
  } else {
    fsBanner.style.display="none";
  }
}
function setResult(msg,color="#ffe156") {
  resultMsg.textContent = msg;
  resultMsg.style.color = color;
  resultMsg.style.textShadow = color==="red"?"0 0 2vw #f00":"0 0 1.5vw #ffe156";
}

// Game Logic
function genRandomBoard(chasingFS=false, fsCount=0) {
  let board = [];
  let dolls = 0;
  for(let r=0;r<ROWS;r++) {
    let row=[];
    for(let c=0;c<REELS;c++) {
      let idx;
      if(state.guaranteedFS && dolls < 4) {
        idx = 4; dolls++;
      } else if(chasingFS && fsCount===3 && c===4){
        idx = Math.random()<0.7 ? 4 : Math.floor(Math.random()*SYMBOLS.length-1);
        if(idx===4) dolls++;
      } else if(chasingFS && Math.random()<0.2 && dolls<3) {
        idx = 4; dolls++;
      } else if(Math.random()<0.03) { // rare free spin
        idx = 4; dolls++;
      } else if(Math.random()<0.2 && !chasingFS) { // slow win chance
        idx = Math.floor(Math.random()*5);
      } else {
        idx = Math.floor(Math.random()*SYMBOLS.length-1);
      }
      if(idx<0) idx=0;
      row.push(idx);
    }
    board.push(row);
  }
  return board;
}
function findWins(board) {
  // 5 in a row (horizontal or vertical)
  let wins=[];
  for(let r=0;r<ROWS;r++) {
    let sym=board[r][0];
    if(sym===4) continue; // skip doll
    let ok=true;
    for(let c=1;c<REELS;c++) if(board[r][c]!==sym) ok=false;
    if(ok) for(let c=0;c<REELS;c++) wins.push([r,c]);
  }
  for(let c=0;c<REELS;c++) {
    let sym=board[0][c];
    if(sym===4) continue;
    let ok=true;
    for(let r=1;r<ROWS;r++) if(board[r][c]!==sym) ok=false;
    if(ok) for(let r=0;r<ROWS;r++) wins.push([r,c]);
  }
  return wins;
}
function countDolls(board) {
  let count=0;
  for(let r=0;r<ROWS;r++) for(let c=0;c<REELS;c++) if(board[r][c]===4) count++;
  return count;
}
function spin() {
  if(state.spinning) return;
  if(!state.freeGames && state.balance<BETS[state.betIdx]) {
    setResult("Not enough balance!","red"); return;
  }
  state.spinning=true;
  spinBtn.disabled=true;
  setResult("SPINNING...", "#fff");
  spinSound.currentTime=0; spinSound.play();
  if(!state.freeGames) state.balance-=BETS[state.betIdx];

  let chase = state.chasingFS;
  let chaseCount = state.chasingFSCount;

  let frames = chase ? 17 : 13, cur = 0;
  let anim = setInterval(()=>{
    let tempBoard = genRandomBoard(chase, chaseCount);
    drawBoard(tempBoard);
    cur++;
    if(cur>=frames) {
      clearInterval(anim);
      let board = genRandomBoard(chase, chaseCount);
      state.board = board;
      drawBoard(board);
      // Dolls
      let dolls = countDolls(board);
      // Chasing for 4th doll
      if(chase && chaseCount===3 && dolls>=4) {
        state.guaranteedFS = false;
        triggerFreeSpins();
        updateUI();
        setTimeout(()=>{spinBtn.disabled=false; state.spinning=false;},700);
        return;
      } else if(dolls===3 && !state.freeGames && Math.random()<0.33) {
        // Start chase animation for 4th doll (rare)
        state.chasingFS = true;
        state.chasingFSCount = 3;
        setResult("Almost there... Catch the 4th doll!","#ff7f50");
        setTimeout(()=>spin(),900);
        return;
      } else if(dolls>=4 && !state.freeGames) {
        triggerFreeSpins();
      } else {
        let wins = findWins(board);
        let winAmt = 0;
        if(wins.length) {
          winSound.currentTime=0; winSound.play();
          winAmt = BETS[state.betIdx]*5;
          state.balance+=winAmt;
          drawBoard(board,wins);
          setResult("WIN! +$" + winAmt.toFixed(2),"#ffe156");
        } else setResult(dolls?"":"Try Again!","#fff");
        if(state.freeGames) {
          state.fsLeft--;
          if(state.fsLeft<=0) {
            state.freeGames=0;
            setTimeout(()=>setResult("Free Spins Over","#01e6c2"),900);
          }
        }
      }
      state.chasingFS = false;
      state.chasingFSCount = 0;
      updateUI();
      state.spinning=false;
      spinBtn.disabled=false;
    }
  },chase?55:77);
}
function triggerFreeSpins() {
  bonusSound.currentTime=0; bonusSound.play();
  state.freeGames=FREE_SPIN_AWARD;
  state.fsLeft=FREE_SPIN_AWARD;
  setResult("FREE SPINS! ("+FREE_SPIN_AWARD+")","#01e6c2");
}

betMinus.onclick=()=>{ if(state.spinning) return;
  if(state.betIdx>0) state.betIdx--; updateUI();
};
betPlus.onclick=()=>{ if(state.spinning) return;
  if(state.betIdx<BETS.length-1) state.betIdx++; updateUI();
};
spinBtn.onclick=()=>spin();
document.addEventListener('keydown',e=>{
  if(e.code==='Space'||e.key===' ')spin();
});

function init() {
  preloadImages();
  state.board=[];
  for(let r=0;r<ROWS;r++) {
    let row=[];
    for(let c=0;c<REELS;c++) row.push(Math.floor(Math.random()*SYMBOLS.length));
    state.board.push(row);
  }
  drawBoard(state.board);
  updateUI();
  setResult("Ready to play!");
}
init();
  </script>
</body>
</html>
