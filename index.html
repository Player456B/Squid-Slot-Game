<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Squid Slot Survival</title>
  <style>
body {
  margin: 0;
  padding: 0;
  font-family: 'Orbitron', Arial, sans-serif;
  background: #16171c;
  color: #fff;
  min-height: 100vh;
}

#game-container {
  max-width: 420px;
  margin: 24px auto;
  background: rgba(22, 23, 28, 0.99);
  border-radius: 20px;
  box-shadow: 0 0 24px 4px #ff003c99;
  padding: 24px 18px 30px 18px;
}

header h1 {
  color: #ff003c;
  font-size: 2.1em;
  margin-bottom: 0.1em;
  text-shadow: 0 0 12px #ff003c88, 0 2px 0 #000;
  letter-spacing: 2px;
}
.subtitle {
  font-size: 1em;
  color: #c7c7c7;
  margin-bottom: 18px;
}

.slot-reels {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #22242b;
  border-radius: 16px;
  padding: 16px 5px;
  margin: 0 auto 8px auto;
  box-shadow: 0 2px 12px #2a002d44 inset;
  border: 2px solid #ff003c66;
  position: relative;
  width: 100%;
  max-width: 340px;
  height: 120px;
}

.reel {
  width: 76px;
  height: 76px;
  margin: 0 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #1a1b22;
  border-radius: 12px;
  box-shadow: 0 0 10px #ff003c22;
  border: 2px solid #39394d;
  transition: border 0.17s;
  position: relative;
}

.reel img {
  width: 64px;
  height: 64px;
  object-fit: contain;
  user-select: none;
  pointer-events: none;
  filter: drop-shadow(0 0 6px #ff003c55);
}

.payline {
  width: 90%;
  margin: -32px auto 10px auto;
  height: 4px;
  background: linear-gradient(90deg, transparent 0%, #ff003c 50%, transparent 100%);
  border-radius: 2px;
  box-shadow: 0 0 8px #ff003c88;
}

.bet-panel {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 14px;
  margin-bottom: 12px;
}

.bet-panel button {
  background: #191a22;
  color: #ff003c;
  border: 2px solid #ff003c99;
  font-size: 1.3em;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  cursor: pointer;
  transition: background 0.17s;
}
.bet-panel button:active {
  background: #ff003c22;
}

#bet-amount {
  font-size: 1.4em;
  color: #fff;
  font-weight: bold;
  min-width: 40px;
  text-align: center;
}

#spin-btn {
  width: 100%;
  padding: 16px;
  font-size: 1.4em;
  margin: 10px 0 0 0;
  background: linear-gradient(90deg, #ff003c, #5f003c 70%);
  color: #fff;
  border: none;
  border-radius: 14px;
  box-shadow: 0 0 16px #ff003c44;
  cursor: pointer;
  text-shadow: 0 2px 0 #000;
  transition: background 0.18s, box-shadow 0.18s;
  font-family: inherit;
  font-weight: bold;
  letter-spacing: 2px;
}
#spin-btn:active {
  background: #ff003cbb;
  box-shadow: 0 0 6px #ff003c88;
}

#result-message {
  min-height: 34px;
  text-align: center;
  margin-top: 12px;
  font-size: 1.1em;
  font-weight: bold;
  text-shadow: 0 0 9px #ff003c44;
}

.balance-panel {
  margin-top: 18px;
  text-align: center;
  color: #c7c7c7;
  font-size: 1.05em;
  letter-spacing: 1px;
}

@media (max-width: 600px) {
  #game-container {
    max-width: 99vw;
    padding: 10px 2vw 20px 2vw;
    border-radius: 8px;
  }
  .slot-reels {
    max-width: 96vw;
    height: 84px;
    padding: 9px 1px;
  }
  .reel {
    width: 48px;
    height: 48px;
    margin: 0 4px;
  }
  .reel img {
    width: 38px;
    height: 38px;
  }
  .payline {
    margin: -18px auto 6px auto;
  }
}
 </style>
</head>
<body>
  <div id="game-container">
    <header>
      <h1>Squid Slot Survival</h1>
      <p class="subtitle">Survive the reels. Win the prize.</p>
    </header>
    <main>
      <div class="slot-reels" id="slot-reels">
        <div class="reel" id="reel-0"></div>
        <div class="reel" id="reel-1"></div>
        <div class="reel" id="reel-2"></div>
      </div>
      <div class="payline"></div>
      <div class="bet-panel">
        <button id="bet-minus" aria-label="Decrease Bet">-</button>
        <span id="bet-amount">1</span>
        <button id="bet-plus" aria-label="Increase Bet">+</button>
      </div>
      <button id="spin-btn">SPIN</button>
      <div id="result-message"></div>
      <div class="balance-panel">
        <span>Balance: <span id="balance">1000</span></span>
      </div>
    </main>
  </div>
  <audio id="win-sound" src="assets/win.mp3" preload="auto"></audio>
  <audio id="lose-sound" src="assets/lose.mp3" preload="auto"></audio>
  <script>
// Squid Slot Survival - Core Slot Logic

const SYMBOLS = [
  { name: 'mask',    img: 'assets/mask.png',   payout: 20 },
  { name: 'doll',    img: 'assets/doll.png',   payout: 40 },
  { name: 'money',   img: 'assets/money.png',  payout: 100 },
  { name: 'skull',   img: 'assets/skull.png',  payout: 0 }
];

const REELS = 3;
const INITIAL_BALANCE = 1000;
const BETS = [1, 2, 5, 10, 20, 50, 100];

let currentBetIndex = 0;
let balance = INITIAL_BALANCE;
let spinning = false;

const reelEls = [];
const resultMessage = document.getElementById('result-message');
const spinBtn = document.getElementById('spin-btn');
const betAmountEl = document.getElementById('bet-amount');
const betMinusBtn = document.getElementById('bet-minus');
const betPlusBtn = document.getElementById('bet-plus');
const balanceEl = document.getElementById('balance');
const winAudio = document.getElementById('win-sound');
const loseAudio = document.getElementById('lose-sound');

// Preload images
SYMBOLS.forEach(sym => {
  const img = new window.Image();
  img.src = sym.img;
});

for (let i = 0; i < REELS; i++) {
  reelEls[i] = document.getElementById(`reel-${i}`);
}

// Helper: Draw a static symbol in each reel
function setReels(symbolIndexes) {
  for (let i = 0; i < REELS; i++) {
    reelEls[i].innerHTML = `<img src="${SYMBOLS[symbolIndexes[i]].img}" alt="${SYMBOLS[symbolIndexes[i]].name}">`;
  }
}

// Helper: Random symbol indexes
function randomSymbols() {
  return Array(REELS).fill(0).map(() => Math.floor(Math.random() * SYMBOLS.length));
}

// Helper: Spin animation
function animateSpin(targetIndexes, cb) {
  const SPIN_LOOPS = [12, 16, 20];
  let loops = [0, 0, 0];
  let curSymbols = [0, 0, 0];

  function spinStep() {
    let spinningNow = false;
    for (let i = 0; i < REELS; i++) {
      if (loops[i] < SPIN_LOOPS[i]) {
        curSymbols[i] = Math.floor(Math.random() * SYMBOLS.length);
        reelEls[i].innerHTML = `<img src="${SYMBOLS[curSymbols[i]].img}" alt="${SYMBOLS[curSymbols[i]].name}">`;
        loops[i]++;
        spinningNow = true;
      } else if (loops[i] === SPIN_LOOPS[i]) {
        // Show final symbol
        reelEls[i].innerHTML = `<img src="${SYMBOLS[targetIndexes[i]].img}" alt="${SYMBOLS[targetIndexes[i]].name}">`;
        loops[i]++;
      }
    }
    if (spinningNow) {
      setTimeout(spinStep, 70);
    } else {
      cb();
    }
  }
  spinStep();
}

// Slot math: Win if all three symbols match (except skull: always lose)
function checkWin(symbolIndexes) {
  const [a, b, c] = symbolIndexes;
  if (a === b && b === c && SYMBOLS[a].name !== 'skull') {
    return SYMBOLS[a].payout;
  }
  return 0;
}

// Bet panel
function updateBetDisplay() {
  betAmountEl.textContent = BETS[currentBetIndex];
}

betMinusBtn.onclick = () => {
  if (!spinning && currentBetIndex > 0) {
    currentBetIndex--;
    updateBetDisplay();
  }
};
betPlusBtn.onclick = () => {
  if (!spinning && currentBetIndex < BETS.length - 1) {
    currentBetIndex++;
    updateBetDisplay();
  }
};

function updateBalance() {
  balanceEl.textContent = balance;
}

function setResultMessage(msg, isWin) {
  resultMessage.textContent = msg;
  resultMessage.style.color = isWin ? '#fffc59' : '#fff';
  resultMessage.style.textShadow = isWin ? '0 0 10px #fffc59, 0 2px 0 #000' : '';
}

function spin() {
  if (spinning) return;
  if (balance < BETS[currentBetIndex]) {
    setResultMessage('Insufficient balance!', false);
    loseAudio.currentTime = 0; loseAudio.play();
    return;
  }
  spinning = true;
  spinBtn.disabled = true;
  setResultMessage('Spinning...', false);

  // Deduct bet immediately
  balance -= BETS[currentBetIndex];
  updateBalance();

  // Target symbols
  let targetIndexes = randomSymbols();
  animateSpin(targetIndexes, function() {
    // Math Check
    const winAmount = checkWin(targetIndexes) * BETS[currentBetIndex];
    if (winAmount > 0) {
      // Win
      balance += winAmount;
      updateBalance();
      setResultMessage(`WIN! +${winAmount}`, true);
      winAudio.currentTime = 0; winAudio.play();
    } else {
      setResultMessage('You lost! Try again.', false);
      loseAudio.currentTime = 0; loseAudio.play();
    }
    spinning = false;
    spinBtn.disabled = false;
  });
}

// Keyboard & touch support
spinBtn.onclick = spin;
document.addEventListener('keydown', (e) => {
  if (e.code === 'Space' || e.key === ' ') {
    spin();
  }
});
spinBtn.addEventListener('touchstart', spin);

// Initial state
setReels([0,1,2]);
updateBetDisplay();
updateBalance();
setResultMessage('Ready to play!', false);
  </script>
</body>
</html>
